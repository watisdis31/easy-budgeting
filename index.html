<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Easy Budgeting</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style.css" />

    <link rel="icon" href="favicon.png" sizes="32x32" />
  </head>
  <body class="bg-light">
    <div class="container py-3">
      <!-- LOGGED OUT -->
      <div id="logged-out">
        <div id="auth-screen">
          <div class="auth-card">
            <h1 class="auth-title">WELCOME TO<br />EASY BUDGETING</h1>

            <p class="auth-subtitle">
              makes your spending justified<br />
              <span>and not with copium</span>
            </p>

            <button id="loginBtn" class="bw2-google-btn">
              <img src="google.png" alt="google account logo" />
              SIGN IN WITH GOOGLE
            </button>
          </div>
        </div>
      </div>

      <!-- LOGGED IN -->
      <div
        id="logged-in"
        class="d-none d-flex align-items-center mb-3 gap-2 justify-content-center"
      >
        <img
          id="profilePic"
          src=""
          class="rounded-circle"
          width="32"
          height="32"
        />
        <p class="mb-0">Logged in as <strong id="userEmail"></strong></p>
        <button id="logoutBtn" class="btn btn-outline-danger btn-sm">
          Logout
        </button>
      </div>

      <!-- APP -->
      <div id="app" class="d-none">
        <!-- SAVINGS -->
        <div class="card mb-3 text-center">
          <div class="card-body">
            <h6 class="text-muted">My Savings</h6>
            <h2 id="savings">Rp 0</h2>
          </div>
        </div>

        <!-- MONTH SUMMARY -->
        <div class="card mb-3">
          <div class="card-body text-center">
            <p class="text-success mb-1">
              Income: Rp <span id="monthIncome">0</span>
            </p>
            <p class="text-danger mb-1">
              Expense: Rp <span id="monthExpense">0</span>
            </p>
            <strong> Saved: Rp <span id="monthSaved">0</span> </strong>
            <button
              id="openChartBtn"
              class="btn btn-outline-secondary btn-sm w-100 mt-2"
            >
              üìä View Chart
            </button>
          </div>
        </div>

        <!-- MONTH COMPARISON -->
        <div class="card mb-3">
          <div class="card-body text-center">
            <strong id="monthCompareText" class="text-muted"></strong>
          </div>
        </div>

        <!-- CALENDAR -->
        <div class="card mb-3">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <button id="prevMonth" class="btn btn-sm btn-outline-secondary">
                ‚Üê
              </button>
              <strong id="monthLabel"></strong>
              <button id="nextMonth" class="btn btn-sm btn-outline-secondary">
                ‚Üí
              </button>
            </div>
            <div class="calendar-grid"></div>
          </div>
        </div>

        <!-- DAY -->
        <div class="text-center mb-3">
          <button id="prevDay" class="btn btn-sm btn-outline-secondary">
            ‚Üê
          </button>
          <strong id="currentDay" class="mx-2"></strong>
          <button id="nextDay" class="btn btn-sm btn-outline-secondary">
            ‚Üí
          </button>
        </div>

        <!-- INPUTS -->
        <div class="card mb-2">
          <div class="card-body">
            <input
              id="incomeAmount"
              type="number"
              class="form-control mb-2"
              placeholder="Income amount"
            />
            <input
              id="incomeLabel"
              class="form-control mb-2"
              placeholder="Income label"
            />
            <button id="addIncome" class="btn btn-success w-100">
              + Add Income
            </button>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-body">
            <input
              id="expenseAmount"
              type="number"
              class="form-control mb-2"
              placeholder="Expense amount"
            />

            <select id="expenseCategory" class="form-control mb-2">
              <option value="transport">Transport</option>
              <option value="food">Food / Drinks</option>
              <option value="entertainment">Entertainment</option>
              <option value="work">Work / Business</option>
              <option value="health">Health</option>
              <option value="household">Household</option>
            </select>

            <input
              id="expenseLabel"
              class="form-control mb-2"
              placeholder="Expense label"
            />

            <button id="addExpense" class="btn btn-danger w-100">
              - Add Expense
            </button>
          </div>
        </div>

        <!-- TRANSACTIONS -->
        <div id="transactions"></div>
      </div>
    </div>

    <!-- DELETE MODAL -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Delete Transaction?</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            Are you sure you want to delete this transaction?
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button id="confirmDeleteBtn" type="button" class="btn btn-danger">
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="chartModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bw2-popup">
          <div class="modal-header">
            <h5 class="modal-title">Spending Chart</h5>
            <button class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body text-center">
            <div class="btn-group mb-2">
              <button id="chartDay" class="btn btn-sm btn-outline-secondary">
                Day
              </button>
              <button id="chartMonth" class="btn btn-sm btn-outline-secondary">
                Month
              </button>
            </div>
            <canvas id="pieChart"></canvas>

            <p
              id="chartEmptyText"
              class="mt-3"
              style="display: none; font-size: 0.7rem"
            >
              No expense data for this period
            </p>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </body>
</html>
